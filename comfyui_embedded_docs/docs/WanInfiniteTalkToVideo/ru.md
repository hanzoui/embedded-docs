> Эта документация была создана с помощью ИИ. Если вы обнаружите ошибки или у вас есть предложения по улучшению, пожалуйста, внесите свой вклад! [Редактировать на GitHub](https://github.com/Comfy-Org/embedded-docs/blob/main/comfyui_embedded_docs/docs/WanInfiniteTalkToVideo/ru.md)

Узел WanInfiniteTalkToVideo генерирует видеопоследовательности из аудиовхода. Он использует модель видеодиффузии, кондиционированную аудио-признаками, извлечёнными из одного или двух говорящих, для создания латентного представления видео с говорящей головой. Узел может сгенерировать новую последовательность или расширить существующую, используя предыдущие кадры для контекста движения.

## Входы

| Параметр | Тип данных | Обязательный | Диапазон | Описание |
|-----------|-----------|----------|-------|-------------|
| `mode` | COMBO | Да | `"single_speaker"`<br>`"two_speakers"` | Режим аудиовхода. `"single_speaker"` использует один аудиовход. `"two_speakers"` включает входы для второго говорящего и соответствующие маски. |
| `model` | MODEL | Да | - | Базовая модель видеодиффузии. |
| `model_patch` | MODELPATCH | Да | - | Патч модели, содержащий слои проекции аудио. |
| `positive` | CONDITIONING | Да | - | Позитивное кондиционирование для управления генерацией. |
| `negative` | CONDITIONING | Да | - | Негативное кондиционирование для управления генерацией. |
| `vae` | VAE | Да | - | VAE, используемый для кодирования изображений в латентное пространство и обратно. |
| `width` | INT | Нет | 16 - MAX_RESOLUTION | Ширина выходного видео в пикселях. Должна быть кратна 16. (по умолчанию: 832) |
| `height` | INT | Нет | 16 - MAX_RESOLUTION | Высота выходного видео в пикселях. Должна быть кратна 16. (по умолчанию: 480) |
| `length` | INT | Нет | 1 - MAX_RESOLUTION | Количество кадров для генерации. (по умолчанию: 81) |
| `clip_vision_output` | CLIPVISIONOUTPUT | Нет | - | Опциональный выход CLIP vision для дополнительного кондиционирования. |
| `start_image` | IMAGE | Нет | - | Опциональное начальное изображение для инициализации видеопоследовательности. |
| `audio_encoder_output_1` | AUDIOENCODEROUTPUT | Да | - | Основной выход аудиоэнкодера, содержащий признаки для первого говорящего. |
| `motion_frame_count` | INT | Нет | 1 - 33 | Количество предыдущих кадров, используемых в качестве контекста движения при расширении последовательности. (по умолчанию: 9) |
| `audio_scale` | FLOAT | Нет | -10.0 - 10.0 | Коэффициент масштабирования, применяемый к аудиокондиционированию. (по умолчанию: 1.0) |
| `previous_frames` | IMAGE | Нет | - | Опциональные предыдущие видеокадры для продолжения. |
| `audio_encoder_output_2` | AUDIOENCODEROUTPUT | Нет | - | Второй выход аудиоэнкодера. Требуется, когда `mode` установлен в `"two_speakers"`. |
| `mask_1` | MASK | Нет | - | Маска для первого говорящего, требуется при использовании двух аудиовходов. |
| `mask_2` | MASK | Нет | - | Маска для второго говорящего, требуется при использовании двух аудиовходов. |

**Ограничения параметров:**
*   Когда `mode` установлен в `"two_speakers"`, параметры `audio_encoder_output_2`, `mask_1` и `mask_2` становятся обязательными.
*   Если предоставлен `audio_encoder_output_2`, то также должны быть предоставлены `mask_1` и `mask_2`.
*   Если предоставлены `mask_1` и `mask_2`, то также должен быть предоставлен `audio_encoder_output_2`.
*   Если предоставлены `previous_frames`, они должны содержать как минимум столько кадров, сколько указано в `motion_frame_count`.

## Выходы

| Имя выхода | Тип данных | Описание |
|-------------|-----------|-------------|
| `model` | MODEL | Исправленная модель с применённым аудиокондиционированием. |
| `positive` | CONDITIONING | Позитивное кондиционирование, потенциально модифицированное дополнительным контекстом (например, начальным изображением, CLIP vision). |
| `negative` | CONDITIONING | Негативное кондиционирование, потенциально модифицированное дополнительным контекстом. |
| `latent` | LATENT | Сгенерированная видеопоследовательность в латентном пространстве. |
| `trim_image` | INT | Количество кадров от начала контекста движения, которые следует обрезать при расширении последовательности. |
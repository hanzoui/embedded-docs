> Эта документация была создана с помощью ИИ. Если вы обнаружите ошибки или у вас есть предложения по улучшению, пожалуйста, внесите свой вклад! [Редактировать на GitHub](https://github.com/Comfy-Org/embedded-docs/blob/main/comfyui_embedded_docs/docs/TextEncodeZImageOmni/ru.md)

Узел TextEncodeZImageOmni — это продвинутый узел для создания кондиционирования, который кодирует текстовый промпт вместе с опциональными эталонными изображениями в формат, подходящий для моделей генерации изображений. Он может обрабатывать до трёх изображений, при необходимости кодируя их с помощью энкодера изображений и/или VAE для получения эталонных латентов, и интегрирует эти визуальные ссылки с текстовым промптом, используя определённую структуру шаблона.

## Входы

| Параметр | Тип данных | Обязательный | Диапазон | Описание |
|-----------|-----------|----------|-------|-------------|
| `clip` | CLIP | Да | | Модель CLIP, используемая для токенизации и кодирования текстового промпта. |
| `image_encoder` | CLIPVision | Нет | | Опциональная модель энкодера изображений. Если предоставлена, будет использоваться для кодирования входных изображений, а полученные эмбеддинги будут добавлены в кондиционирование. |
| `prompt` | STRING | Да | | Текстовый промпт для кодирования. Это поле поддерживает многострочный ввод и динамические промпты. |
| `auto_resize_images` | BOOLEAN | Нет | | Если включено (по умолчанию: True), входные изображения будут автоматически изменяться в размере на основе их площади в пикселях перед передачей в VAE для кодирования. |
| `vae` | VAE | Нет | | Опциональная модель VAE. Если предоставлена, будет использоваться для кодирования входных изображений в латентные представления, которые добавляются в кондиционирование как эталонные латенты. |
| `image1` | IMAGE | Нет | | Первое опциональное эталонное изображение. |
| `image2` | IMAGE | Нет | | Второе опциональное эталонное изображение. |
| `image3` | IMAGE | Нет | | Третье опциональное эталонное изображение. |

**Примечание:** Узел может принимать максимум три изображения (`image1`, `image2`, `image3`). Входы `image_encoder` и `vae` используются только если предоставлено хотя бы одно изображение. Когда `auto_resize_images` имеет значение True и подключен `vae`, изображения изменяются до размера, близкого к площади 1024x1024 пикселей, перед кодированием.

## Выходы

| Имя выхода | Тип данных | Описание |
|-------------|-----------|-------------|
| `CONDITIONING` | CONDITIONING | Финальный выход кондиционирования, который содержит закодированный текстовый промпт и может включать эмбеддинги закодированных изображений и/или эталонные латенты, если изображения были предоставлены. |
